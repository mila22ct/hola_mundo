<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>CStorage Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<h1>GBDI Arboretum<br><small>Version Release 1</small></h1>
<!-- Generated by Doxygen 1.8.9.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classCStorage.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="classCStorage-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">CStorage Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="CStorage_8h_source.html">CStorage.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structCStorage_1_1statisticsCounters.html">statisticsCounters</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a3852585eee18acf983c02574f05a3f07"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCStorage.html#a3852585eee18acf983c02574f05a3f07">CStorage</a> ()</td></tr>
<tr class="separator:a3852585eee18acf983c02574f05a3f07"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af48bf6460d89ebbfcde18d2fef92db68"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCStorage.html#af48bf6460d89ebbfcde18d2fef92db68">~CStorage</a> ()</td></tr>
<tr class="separator:af48bf6460d89ebbfcde18d2fef92db68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac17b49577312fe11eb61283fcca5110"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCStorage.html#aac17b49577312fe11eb61283fcca5110">Open</a> (const char *fName)</td></tr>
<tr class="separator:aac17b49577312fe11eb61283fcca5110"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a165c093041c0c2d6feb0a0b3c269d97d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCStorage.html#a165c093041c0c2d6feb0a0b3c269d97d">Close</a> ()</td></tr>
<tr class="separator:a165c093041c0c2d6feb0a0b3c269d97d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8b987cbf28181e82068c89c725a8a60"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCStorage.html#aa8b987cbf28181e82068c89c725a8a60">Create</a> (const char *fName, int pageSize, int userHeaderSize, int cacheNPages=100)</td></tr>
<tr class="separator:aa8b987cbf28181e82068c89c725a8a60"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16afd3d8470572f69c567fdebc8adc72"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCStorage.html#a16afd3d8470572f69c567fdebc8adc72">IsOpened</a> ()</td></tr>
<tr class="separator:a16afd3d8470572f69c567fdebc8adc72"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade63ec2c50ddcf637a9c562e7d968b4b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCStorage.html#ade63ec2c50ddcf637a9c562e7d968b4b">Drop</a> ()</td></tr>
<tr class="separator:ade63ec2c50ddcf637a9c562e7d968b4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab1e72909b7bd18f57b4bc255e0b79dc"><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCStorage.html#aab1e72909b7bd18f57b4bc255e0b79dc">GetFileSize</a> ()</td></tr>
<tr class="separator:aab1e72909b7bd18f57b4bc255e0b79dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a639350d4e5857b2a603e61abf9130d23"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCStorage.html#a639350d4e5857b2a603e61abf9130d23">ReadUserHeader</a> (void *page)</td></tr>
<tr class="separator:a639350d4e5857b2a603e61abf9130d23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5aca8ce7c4801d2e119f591dbc766a3f"><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCStorage.html#a5aca8ce7c4801d2e119f591dbc766a3f">GetUserHeaderSize</a> ()</td></tr>
<tr class="separator:a5aca8ce7c4801d2e119f591dbc766a3f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c83fef3f80e4aceb588c02982af4cd6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCStorage.html#a0c83fef3f80e4aceb588c02982af4cd6">WriteUserHeader</a> (void *page)</td></tr>
<tr class="separator:a0c83fef3f80e4aceb588c02982af4cd6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7fd319f529622a00e8c3463d1a84f39b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCStorage.html#a7fd319f529622a00e8c3463d1a84f39b">ReadPage</a> (long pageId, void *page)</td></tr>
<tr class="separator:a7fd319f529622a00e8c3463d1a84f39b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4b2b91050f73ec3d57184f0b9ff6a61"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCStorage.html#ab4b2b91050f73ec3d57184f0b9ff6a61">WritePage</a> (long pageId, void *page)</td></tr>
<tr class="separator:ab4b2b91050f73ec3d57184f0b9ff6a61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a120a89f4502c445eca14ed65f445e310"><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCStorage.html#a120a89f4502c445eca14ed65f445e310">InsertNewPage</a> (void *page)</td></tr>
<tr class="separator:a120a89f4502c445eca14ed65f445e310"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ae5dcc40ab69d8937df4450ef109570"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCStorage.html#a3ae5dcc40ab69d8937df4450ef109570">FreePage</a> (long pageId)</td></tr>
<tr class="separator:a3ae5dcc40ab69d8937df4450ef109570"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a748270cc71ee2c1e0ab3554f5edae779"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCStorage.html#a748270cc71ee2c1e0ab3554f5edae779">FlushCache</a> ()</td></tr>
<tr class="separator:a748270cc71ee2c1e0ab3554f5edae779"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad033268ecd38e329936a87ae85be4371"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCStorage.html#ad033268ecd38e329936a87ae85be4371">GetCacheTotalPages</a> ()</td></tr>
<tr class="separator:ad033268ecd38e329936a87ae85be4371"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec990edae1934e0217c3a7d798922f71"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCStorage.html#aec990edae1934e0217c3a7d798922f71">ResizeCache</a> (int newCacheNPages)</td></tr>
<tr class="separator:aec990edae1934e0217c3a7d798922f71"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a768cea8fa3eb23c66ecc909c7d286ac1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCStorage.html#a768cea8fa3eb23c66ecc909c7d286ac1">GetPageSize</a> ()</td></tr>
<tr class="separator:a768cea8fa3eb23c66ecc909c7d286ac1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1204a362122975b549600eeee573ac69"><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCStorage.html#a1204a362122975b549600eeee573ac69">GetTotalPagesInUse</a> ()</td></tr>
<tr class="separator:a1204a362122975b549600eeee573ac69"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a521f4bbe3382b7d06c6260246f2ba047"><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCStorage.html#a521f4bbe3382b7d06c6260246f2ba047">GetTotalPagesIncludingDisposed</a> ()</td></tr>
<tr class="separator:a521f4bbe3382b7d06c6260246f2ba047"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5fb887dfef9054ce5bee0fcf0510a918"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structCStorage_1_1statisticsCounters.html">statisticsCounters</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCStorage.html#a5fb887dfef9054ce5bee0fcf0510a918">GetStatistics</a> ()</td></tr>
<tr class="separator:a5fb887dfef9054ce5bee0fcf0510a918"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02198a929dacc1f54c5cd731eee3b8e1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCStorage.html#a02198a929dacc1f54c5cd731eee3b8e1">ResetStatistics</a> ()</td></tr>
<tr class="separator:a02198a929dacc1f54c5cd731eee3b8e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:add31f4a7228c532a50c8b2681712f7df"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structCStorage_1_1statisticsCounters.html">statisticsCounters</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCStorage.html#add31f4a7228c532a50c8b2681712f7df">counters</a></td></tr>
<tr class="separator:add31f4a7228c532a50c8b2681712f7df"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:af45a6ce67dc79b3c0bf38a3c38b4edab"><td class="memItemLeft" align="right" valign="top">class&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCStorage.html#af45a6ce67dc79b3c0bf38a3c38b4edab">CNSCache&lt; CStorage &gt;</a></td></tr>
<tr class="separator:af45a6ce67dc79b3c0bf38a3c38b4edab"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Object to manage disk pages. The options include open, close and create files and read, write (change) and create pages.</p>
<p>All the disk page area is available. It means that no internal (control) data is written in the page. Only when a page is disposed an internal data is written (a pointer to the next disposed page or null). If the user wants to make some logical mark, use any position after the 20th byte (actually, it should be after the 4th, but I decided to reserve some more just in case...). It must be observed that, if the user writes on a disposed page, the data have great chance to be lost.</p>
<p>The intention with this object is only to help on building indexing methods for spatial and metric data. Yet, the idea is to use this as an academic tool for testing and tuning indexing methods, and not as a commercial one. So, it is not RELIABLE! Don't expect too much.</p>
<p>To aid the disk access, a cache manager is used. Its page replacement policy is the Natural Selection Page Replacement Policy (a mixing between the LRU and LFU replacement policies).</p>
<p>This version was modified from its original version by Fabio Jun Takada Chino and Josiel Maimone de Figueiredo.</p>
<dl class="section author"><dt>Author</dt><dd>Ernesto Cuadros Vargas (Original Author) </dd>
<dd>
Roberto Figueira Santos Filho (Original Author) </dd>
<dd>
Fabio Jun Takada Chino (<a href="#" onclick="location.href='mai'+'lto:'+'chi'+'no'+'@ic'+'mc'+'.us'+'p.'+'br'; return false;">chino<span style="display: none;">.nosp@m.</span>@icm<span style="display: none;">.nosp@m.</span>c.usp<span style="display: none;">.nosp@m.</span>.br</a>) </dd>
<dd>
Josiel Maimone de Figueiredo (<a href="#" onclick="location.href='mai'+'lto:'+'jos'+'ie'+'l@i'+'cm'+'c.u'+'sp'+'.br'; return false;">josie<span style="display: none;">.nosp@m.</span>l@ic<span style="display: none;">.nosp@m.</span>mc.us<span style="display: none;">.nosp@m.</span>p.br</a>) </dd>
<dd>
Marcos Rodrigues Vieira (<a href="#" onclick="location.href='mai'+'lto:'+'mrv'+'ie'+'ira'+'@i'+'cmc'+'.u'+'sp.'+'br'; return false;">mrvie<span style="display: none;">.nosp@m.</span>ira@<span style="display: none;">.nosp@m.</span>icmc.<span style="display: none;">.nosp@m.</span>usp.<span style="display: none;">.nosp@m.</span>br</a>) </dd></dl>

<p>Definition at line <a class="el" href="CStorage_8h_source.html#l00137">137</a> of file <a class="el" href="CStorage_8h_source.html">CStorage.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a3852585eee18acf983c02574f05a3f07"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CStorage::CStorage </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Creates this class. Use <a class="el" href="classCStorage.html#aa8b987cbf28181e82068c89c725a8a60">Create()</a> or <a class="el" href="classCStorage.html#aac17b49577312fe11eb61283fcca5110">Open()</a> to initialize it. </p>

</div>
</div>
<a class="anchor" id="af48bf6460d89ebbfcde18d2fef92db68"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CStorage::~CStorage </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Disposes this instance and releases all allocated resources. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a165c093041c0c2d6feb0a0b3c269d97d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CStorage::Close </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Close the actual file - must have one opened. </p>

</div>
</div>
<a class="anchor" id="aa8b987cbf28181e82068c89c725a8a60"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CStorage::Create </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>pageSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>userHeaderSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cacheNPages</em> = <code>100</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Create and open a new file (overwrites the old one).</p>
<p>In addition to the original version, this method can define the userHeaderSize automatically. If userHeaderSize is passed as a negative value, it will assume that the header size will be about pageSize - 32. It is usefull for the implementation of <a class="el" href="classstDiskPageManager.html">stDiskPageManager</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fName</td><td>File name. </td></tr>
    <tr><td class="paramname">pageSize</td><td>Size of each page in bytes. It can't be a value smaller than 64. </td></tr>
    <tr><td class="paramname">userHeaderSize</td><td>Size of user header in bytes. Negative values will result in an automatically defined size. </td></tr>
    <tr><td class="paramname">cacheNPages</td><td>Number of pages in cache. It can't be a value smaller than 5. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>This object CAN'T have another file opened. </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classio__error.html">io_error</a></td><td>If the file can not be created. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ade63ec2c50ddcf637a9c562e7d968b4b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CStorage::Drop </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Close the actual file and reopen overwriting all data. There must be an opened file. </p>

</div>
</div>
<a class="anchor" id="a748270cc71ee2c1e0ab3554f5edae779"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void CStorage::FlushCache </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Flushes the cache. </p>

<p>Definition at line <a class="el" href="CStorage_8h_source.html#l00258">258</a> of file <a class="el" href="CStorage_8h_source.html">CStorage.h</a>.</p>

<p>References <a class="el" href="CNSCache_8h_source.html#l00371">CNSCache&lt; TpObjCntin &gt;::FlushCache()</a>.</p>

</div>
</div>
<a class="anchor" id="a3ae5dcc40ab69d8937df4450ef109570"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CStorage::FreePage </td>
          <td>(</td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>pageId</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Insert the page in the dispose list.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pageId</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ad033268ecd38e329936a87ae85be4371"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int CStorage::GetCacheTotalPages </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns the number of pages in cache. </p>

<p>Definition at line <a class="el" href="CStorage_8h_source.html#l00265">265</a> of file <a class="el" href="CStorage_8h_source.html">CStorage.h</a>.</p>

</div>
</div>
<a class="anchor" id="aab1e72909b7bd18f57b4bc255e0b79dc"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">long CStorage::GetFileSize </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Return the size of the file including headers and records in dispose list (if it is not empty). Inline. </p>

<p>Definition at line <a class="el" href="CStorage_8h_source.html#l00202">202</a> of file <a class="el" href="CStorage_8h_source.html">CStorage.h</a>.</p>

</div>
</div>
<a class="anchor" id="a768cea8fa3eb23c66ecc909c7d286ac1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int CStorage::GetPageSize </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns the page size in bytes. </p>

<p>Definition at line <a class="el" href="CStorage_8h_source.html#l00280">280</a> of file <a class="el" href="CStorage_8h_source.html">CStorage.h</a>.</p>

</div>
</div>
<a class="anchor" id="a5fb887dfef9054ce5bee0fcf0510a918"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structCStorage_1_1statisticsCounters.html">statisticsCounters</a>&amp; CStorage::GetStatistics </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns statistics. </p>

<p>Definition at line <a class="el" href="CStorage_8h_source.html#l00367">367</a> of file <a class="el" href="CStorage_8h_source.html">CStorage.h</a>.</p>

<p>References <a class="el" href="CStorage_8h_source.html#l00362">counters</a>, <a class="el" href="CStorage_8h_source.html#l00321">CStorage::statisticsCounters::pageRead</a>, <a class="el" href="CStorage_8h_source.html#l00326">CStorage::statisticsCounters::pageWrite</a>, and <a class="el" href="CStorage_8h_source.html#l00336">CStorage::statisticsCounters::totalPageAccess</a>.</p>

</div>
</div>
<a class="anchor" id="a521f4bbe3382b7d06c6260246f2ba047"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">long CStorage::GetTotalPagesIncludingDisposed </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns the total number of pages in the file, including disposed pages. </p>

<p>Definition at line <a class="el" href="CStorage_8h_source.html#l00294">294</a> of file <a class="el" href="CStorage_8h_source.html">CStorage.h</a>.</p>

</div>
</div>
<a class="anchor" id="a1204a362122975b549600eeee573ac69"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">long CStorage::GetTotalPagesInUse </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns the number of allocated pages. </p>

<p>Definition at line <a class="el" href="CStorage_8h_source.html#l00287">287</a> of file <a class="el" href="CStorage_8h_source.html">CStorage.h</a>.</p>

</div>
</div>
<a class="anchor" id="a5aca8ce7c4801d2e119f591dbc766a3f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long CStorage::GetUserHeaderSize </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the user header size. </p>

</div>
</div>
<a class="anchor" id="a120a89f4502c445eca14ed65f445e310"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long CStorage::InsertNewPage </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>page</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Creates a new page and return its id.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">page</td><td>The new page. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a16afd3d8470572f69c567fdebc8adc72"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool CStorage::IsOpened </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns true if file is open or false otherwise. </p>

<p>Definition at line <a class="el" href="CStorage_8h_source.html#l00188">188</a> of file <a class="el" href="CStorage_8h_source.html">CStorage.h</a>.</p>

</div>
</div>
<a class="anchor" id="aac17b49577312fe11eb61283fcca5110"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CStorage::Open </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fName</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Open an existing file. The file given file name MUST exists. This object CAN'T have another file opened.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fName</td><td>The file name. </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classio__error.html">io_error</a></td><td>If the file can not be opened. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a7fd319f529622a00e8c3463d1a84f39b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CStorage::ReadPage </td>
          <td>(</td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>pageId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>page</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Reads a page.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pageId</td><td>The page ID. </td></tr>
    <tr><td class="paramname">page</td><td>The page. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a639350d4e5857b2a603e61abf9130d23"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CStorage::ReadUserHeader </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>page</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a02198a929dacc1f54c5cd731eee3b8e1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void CStorage::ResetStatistics </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Restarts statistics. </p>

<p>Definition at line <a class="el" href="CStorage_8h_source.html#l00376">376</a> of file <a class="el" href="CStorage_8h_source.html">CStorage.h</a>.</p>

<p>References <a class="el" href="CStorage_8h_source.html#l00346">CStorage::statisticsCounters::diskRead</a>, <a class="el" href="CStorage_8h_source.html#l00356">CStorage::statisticsCounters::diskWrite</a>, <a class="el" href="CStorage_8h_source.html#l00311">CStorage::statisticsCounters::headerRead</a>, <a class="el" href="CStorage_8h_source.html#l00316">CStorage::statisticsCounters::headerWrite</a>, <a class="el" href="CStorage_8h_source.html#l00331">CStorage::statisticsCounters::newPage</a>, <a class="el" href="CStorage_8h_source.html#l00321">CStorage::statisticsCounters::pageRead</a>, <a class="el" href="CStorage_8h_source.html#l00326">CStorage::statisticsCounters::pageWrite</a>, and <a class="el" href="CStorage_8h_source.html#l00336">CStorage::statisticsCounters::totalPageAccess</a>.</p>

</div>
</div>
<a class="anchor" id="aec990edae1934e0217c3a7d798922f71"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CStorage::ResizeCache </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>newCacheNPages</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Reinstantiate the cache with newCachePages number of pages and makes it default for future use.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">newCacheNPages</td><td>The new number of pages in the cache. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ab4b2b91050f73ec3d57184f0b9ff6a61"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CStorage::WritePage </td>
          <td>(</td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>pageId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>page</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Writes a page.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pageId</td><td>The page ID. </td></tr>
    <tr><td class="paramname">page</td><td>The page. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a0c83fef3f80e4aceb588c02982af4cd6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CStorage::WriteUserHeader </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>page</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Write user header.</p>
<dl class="section warning"><dt>Warning</dt><dd>This operation don't use the cache. </dd></dl>

</div>
</div>
<h2 class="groupheader">Friends And Related Function Documentation</h2>
<a class="anchor" id="af45a6ce67dc79b3c0bf38a3c38b4edab"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="classCNSCache.html">CNSCache</a>&lt; <a class="el" href="classCStorage.html">CStorage</a> &gt;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="CStorage_8h_source.html#l00429">429</a> of file <a class="el" href="CStorage_8h_source.html">CStorage.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="add31f4a7228c532a50c8b2681712f7df"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structCStorage_1_1statisticsCounters.html">statisticsCounters</a> CStorage::counters</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Counter data. </p>

<p>Definition at line <a class="el" href="CStorage_8h_source.html#l00362">362</a> of file <a class="el" href="CStorage_8h_source.html">CStorage.h</a>.</p>

<p>Referenced by <a class="el" href="CStorage_8h_source.html#l00367">GetStatistics()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="CStorage_8h_source.html">CStorage.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<hr><address style="align: right;"><small>
Generated on Sun May 24 2015 21:45:44 for GBDI Arboretum by <a href="http://www.doxygen.org/index.html">Doxygen</a> 1.8.9.1</small><br>
Copyright &copy 2002-2003 GBDI-ICMC-USP
</address>
</body>
</html>
